<!DOCTYPE html>
<html>

<head>
    <?!= include("front/page/head"); ?>
    <?!= include("front/css/pageCss"); ?>
    <?!= include("front/css/mainCss"); ?>
    <?!= includeWithArgs("front/page/nav", {mail: mail, key: key, fullName: fullName, admin: admin, testing: testing, page: "stat"}); ?>
</head>

<body>
    <div class="container">
        <div class="row"></div>
        <div class="row">
            <div style="margin: auto;width: 100px;">
                <a class='dropdown-trigger buttonGreen valign-wrapper' data-target='yearResult'><?=year?></a>
            </div>
        </div>
            <div class="row">
            <table id="stat" class="centered highlight responsive-table">
                <thead>
                    <tr>
                        <th onclick="sortTableStat(0)" style="cursor:pointer">Classement</th>
                        <th onclick="sortTableStat(1)" style="cursor:pointer">Joueur</th>
                        <th onclick="sortTableStat(2)" style="cursor:pointer">Match</th>
                        <th onclick="sortTableStat(3)" style="cursor:pointer">Victoire</th>
                        <th onclick="sortTableStat(4)" style="cursor:pointer">Nul</th>
                        <th onclick="sortTableStat(5)" style="cursor:pointer">Défaite</th>
                        <th onclick="sortTableStat(6)" style="cursor:pointer">Bonus Offensif</th>
                        <th onclick="sortTableStat(7)" style="cursor:pointer">Bonus Défensif</th>
                        <th onclick="sortTableStat(8)" style="cursor:pointer">Point</th>
                        <th>Point par match</th>
                        <th onclick="sortTableStat(10)" style="cursor:pointer">Meilleure série de victoires</th>
                        <th onclick="sortTableStat(11)" style="cursor:pointer">Pire série de défaites</th>
                        <th>Derniers résultats</th> 
                    </tr>
                </thead>
                <tbody>
                    <?!=table?>
                </tbody>
            </table>
        </div>

        <div class="fixed-action-btn direction-top active" style="bottom: 25px; right: 25px;">
          <a data-target="helper" class="btn-floating btn-large waves-effect waves-light modal-trigger green lighten-2 pulse"><i class="material-icons">help_outline</i></a>
        </div>

        <div id="helper" class="modal">
            <div class="modal-content">
                <h5>Stat</h5>
                <p>Le classement d'un joueur est activé à partir de son 5ème match
                    <br>Le classement est la moyenne du nb de points par match x un coef de participation
                    <br>Victoire : 3 points
                    <br>Nul : 1 point
                    <br>Défaite : 0 point
                    <br>Bonus Offensif : 1 point (victoire avec au moins 5 buts d'écart)
                    <br>Bonus Défensif : 1 point (défaite avec maximum 2 buts d'écar
                    <br>Coef de participation : Nombre de match arrondi * 0.05 (exemple : 6 matchs -> 1 + 1*0.05 = 1.05 / 23 matchs 1 + 2*0.05 -> 1.1)
                </p>
            </div>
        </div>
</div>
</body>
<ul id='yearResult' class='dropdown-content'>
    <li><a href="<?=url?>?page=stat&mail=<?=mail?>&key=<?=key?>&year=2020">2020</a></li>
    <li><a href="<?=url?>?page=stat&mail=<?=mail?>&key=<?=key?>&year=2019">2019</a></li>
</ul>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<?!= include("front/js/stat-js"); ?>
<?!= include("front/js/nav-js"); ?>
</html>